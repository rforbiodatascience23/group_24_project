---
title: "load file"
format: html
editor: visual
---

```{r}
#|echo: false
#|message: false
#|label: load libraries
library(tidyverse)
library(dplyr)
library(readr)
```

```{r}
# Create data directory 

data_dir <- "../data/"
if( !dir.exists(data_dir) ){
  dir.create(path = data_dir)
}

raw_dir <- "../data/_raw/"
if( !dir.exists(raw_dir) ){
  dir.create(path = raw_dir)
}
```

URLS

```{r}
human_file <- "https://raw.githubusercontent.com/s232996/project/main/gCSI_GRdata_v1.3.tsv/data/human.csv"

human_suppl_file <- "https://raw.githubusercontent.com/s232996/project/main/gCSI_GRdata_v1.3.tsv/data/human_suppl.txt"

mouse_file <- "https://raw.githubusercontent.com/s232996/project/main/gCSI_GRdata_v1.3.tsv/data/mouse.csv"

mouse_suppl_file <- "https://raw.githubusercontent.com/s232996/project/main/gCSI_GRdata_v1.3.tsv/data/mouse_suppl.txt"
```

```{r}
# Download human data set files 

human_file <- "https://raw.githubusercontent.com/s232996/project/main/gCSI_GRdata_v1.3.tsv/data/human.csv"

if( !file.exists(str_c(raw_dir, "human.csv"))){
  download.file(
    url = human_file,
    destfile = str_c(raw_dir, "human.csv"))
}

human_data <- read_csv(file = str_c(raw_dir, "human.csv"))

write_tsv(x = human_data,
          file = str_c(data_dir, "human.tsv"))

human_data <- read_tsv(file = str_c(data_dir, "human.tsv")) 

```

```{r}
# Download human supplementary data set files 

human_supp_file <- "https://raw.githubusercontent.com/s232996/project/main/gCSI_GRdata_v1.3.tsv/data/human_suppl.txt"

if( !file.exists(str_c(raw_dir, "human_suppl.txt"))){
  download.file(
    url = human_supp_file,
    destfile = str_c(raw_dir, "human_suppl.txt"))
}

human_suppl_data <- read_tsv(str_c(raw_dir, "human_suppl.txt"))

write_tsv( x= human_suppl_data,
           file = str_c(data_dir, "human_suppl.tsv"))

human_suppl_data <- read_tsv(file = str_c(data_dir, "human_suppl.tsv"))
```

```{r}
#|label: define a function for import the data csv

data_import <- function(data_url,filename,variablename){
  if (!file.exists(str_c(raw_dir,filename))){
    download.file(url = data_url,
                  destfile = str_c(raw_dir, filename))
  }
  variablename <- read_csv(file = str_c(raw_dir,filename))
  
  write_tsv(x = variablename,
            file = str_c(data_dir,filename))
  variablename <- read_tsv(file = str_c(data_dir,filename,".tsv"))
  
  
}

data_import("https://github.com/s232996/project/tree/main/gCSI_GRdata_v1.3.tsv/data/mouse.csv","mouse.csv", mouse_data)

```

```{r}
# Download mouse data set files 

mouse_file <- "https://raw.githubusercontent.com/s232996/project/main/gCSI_GRdata_v1.3.tsv/data/mouse.csv"

if( !file.exists(str_c(raw_dir, "mouse.csv"))){
  download.file(
    url = mouse_file,
    destfile = str_c(raw_dir, "mouse.csv"))
}

mouse_data<-read_csv(str_c(raw_dir, "mouse.csv"))

write_tsv(x = mouse_data,
          file = str_c(data_dir, "mouse.tsv.gz"))

mouse_data <- read_tsv(str_c(data_dir, "mouse.tsv.gz"))
```

```{r}
# Download mouse supplementary data set files 

mouse_supp_file <- "https://raw.githubusercontent.com/s232996/project/main/gCSI_GRdata_v1.3.tsv/data/mouse_suppl.txt"

if( !file.exists(str_c(raw_dir, "mouse_suppl.txt"))){
  download.file(
    url = mouse_supp_file,
    destfile = str_c(raw_dir, "mouse_suppl.txt"))
}

mouse_suppl_data<-read_tsv(str_c(raw_dir, "mouse_suppl.txt"))

write_tsv(x = mouse_suppl_data, 
          file = str_c(data_dir, "mouse_suppl.tsv"))

mouse_suppl_data <- read_tsv(file = str_c(data_dir, "mouse_suppl.tsv"))
```

```{r}
head(human_data)
head(human_sup_data)
head(mouse_data)
head(mouse_sup_data)
```

```{r}
human_data <- download_csv(human_file, "human")
mouse_data <- download_csv(mouse_file, "mouse")

human_suppl_data <- download_txt(human_suppl_file, "human_suppl")
mouse_suppl_data <- download_txt(mouse_suppl_file, "mouse_suppl")
```
