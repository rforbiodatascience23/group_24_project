---
title: "load file"
format: html
editor: visual
---

```{r}
#|echo: false
#|label: load libraries
library(tidyverse)
library(dplyr)
library(readr)
```

We study an RNA -seq RNA study performed on skin cells human and mice

This dataset comes from the study (**Mouse melanoma cell line B16-F10 treated with G007-LK**) in which 12 samples were used. What was measured in that study was the effect of different compounds in the B16-F10 skin cells of the samples. The compounds that were used were the following: dimethyl sulfoxide (DMSO), WNT3a and GOO7LK done one truplicates (Each of the compound was applied in equal number of samples ie. 3).

The sequencing was performed using Illumina HiSeq 2500 and the quantification of the RNA data was performed using the kallisto v0.44 using the GRCm38 assembly.

Technical infomation

Cell line **B16-F10**

Compound portions:

dimethyl sulfoxide (DMSO) (0.1 percent), WNT3a (0.5 microgram per milliliter), WNT3a (0.5 microgram per milliliter); G007LK (1 micromolar), G007LK (1 micromolar)

This study can be accessed under the Accession number: E-MTAB-8101.

..............................................................................................................

The dataset containing the human cells was generated though the **Human melanoma cell lines treated with G007-LK** study. During this experiment 18 human melanoma cell lines derived from the skin of the donors were treated with the compound GOO7-LK with the purpose of detecting its effect to the cells and in order to compare those results with a similar experiment perfo

In detail the experiment went like so:

Three pooled technical replicates from a panel of 18 human (Assay count 36) melanoma cell lines were treated with dimethyl sulfoxide (DMSO) or G007-LK for 24 hours.

The RNA sequence performed using the NextSeq 500 platform. The software kalliso n0.44 was used to identify quantify the human RNA transcripts using the GRCh38 assembly.

Technical informations:

Cell lines: SK-MEL-28, MeWo, A-375, WM35, WM115, WM1341B, WM1366, WM983B, WM451Lu, WM239A, WM266.4, WM852, WM1382,WM9, WM793B)

Compound: G007LK (1mM), dimethyl sulfoxide (0.01)

Dose: 1 micromolar, 0.01 percent

This study can be accessed under the Accession number: E-MTAB-8438

### 

```{r}
# Create data directory 

data_dir <- "../data/"
if( !dir.exists(data_dir) ){
  dir.create(path = data_dir)
}

raw_dir <- "../data/_raw/"
if( !dir.exists(raw_dir) ){
  dir.create(path = raw_dir)
}
```

```{r}
# Download human data set files 

human_file <- "https://raw.githubusercontent.com/s232996/project/main/gCSI_GRdata_v1.3.tsv/data/human.csv"

if( !file.exists(str_c(raw_dir, "human.csv"))){
  download.file(
    url = human_file,
    destfile = str_c(raw_dir, "human.csv"))
}

human_data<-read.csv(str_c(raw_dir, "human.csv"), header = TRUE, sep = ",")

write.table(human_data, file = file.path(data_dir, "human.tsv"), sep = "/t", row.names = FALSE)
```

```{r}
# Download human supplementary data set files 

human_sup_file <- "https://raw.githubusercontent.com/s232996/project/main/gCSI_GRdata_v1.3.tsv/data/human_suppl.txt"

if( !file.exists(str_c(raw_dir, "human_sup.txt"))){
  download.file(
    url = human_sup_file,
    destfile = str_c(raw_dir, "human_suppl.txt"))
}

human_sup_data<-read.table(str_c(raw_dir, "human_suppl.txt"), header = TRUE, sep = "\t")

write.table(human_sup_data, file = file.path(data_dir, "human_sup.tsv"), sep = "/t", row.names = FALSE)
```

```{r}
# Download mouse data set files 

mouse_file <- "https://raw.githubusercontent.com/s232996/project/main/gCSI_GRdata_v1.3.tsv/data/mouse.csv"

if( !file.exists(str_c(raw_dir, "mouse.csv"))){
  download.file(
    url = mouse_file,
    destfile = str_c(raw_dir, "mouse.csv"))
}

mouse_data<-read.csv(str_c(raw_dir, "mouse.csv"), header = TRUE, sep = ",")

write.table(mouse_data, file = file.path(data_dir, "mouse.tsv"), sep = "/t", row.names = FALSE)
```

```{r}
# Download mouse supplementary data set files 

mouse_sup_file <- "https://raw.githubusercontent.com/s232996/project/main/gCSI_GRdata_v1.3.tsv/data/mouse_suppl.txt"

if( !file.exists(str_c(raw_dir, "mouse_suppl.txt"))){
  download.file(
    url = mouse_sup_file,
    destfile = str_c(raw_dir, "mouse_suppl.txt"))
}

mouse_sup_data<-read.table(str_c(raw_dir, "mouse_suppl.txt"), header = TRUE, sep = "\t")

write.table(mouse_sup_data, file = file.path(data_dir, "mouse_sup.tsv"), sep = "/t", row.names = FALSE)
```

```{r}
head(human_data)
head(human_sup_data)
head(mouse_data)
head(mouse_sup_data)
```

```{r}
## FUNCTION FOR THE ABOVE

download_and_convert <- function(file_url, file_name, data_dir) {
  # Download file if it doesn't exist
  if (!file.exists(file.path(data_dir, file_name))) {
    download.file(url = file_url, destfile = file.path(data_dir, file_name))
  }

  # Read the data into a data frame
  data <- read.csv(file.path(data_dir, file_name), header = TRUE, sep = ",")

  # Write the data to a TSV file
  write.table(data, file = file.path(data_dir, str_c(tools::file_path_sans_ext(file_name), ".tsv")),
              sep = "\t", row.names = FALSE)
}

# Usage example
human_file <- "https://raw.githubusercontent.com/s232996/project/main/gCSI_GRdata_v1.3.tsv/data/human.csv"
data_directory <- "/path/to/your/data/directory/"

download_and_convert(human_file, "human.csv", data_directory)
```
